(this["webpackJsonpsd-01-week18-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-01-week18-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(3),u=n.n(l),c=n(1),o=Object(a.createContext)();function i(e,t){return t?e.filter((function(e){return e.name.includes(t)})):e}function s(e,t,n){return i(t?function(e,t){var n=t.column,a=t.comparison,r=t.value;switch(a){case"bigger than":return e.filter((function(e){return e[n]>Number(r)&&"unknown"!==e[n]}));case"less than":return e.filter((function(e){return e[n]<Number(r)&&"unknown"!==e[n]}));case"equal to":return e.filter((function(e){return e[n]===r&&"unknown"!==e[n]}));default:return!1}}(e,t):e,n)}var m=function(e){var t=e.children,n=Object(a.useState)({numericValues:{},filters:[]}),l=Object(c.a)(n,2),u=l[0],m=l[1],f=Object(a.useState)(""),d=Object(c.a)(f,2),v=d[0],p=d[1],b=Object(a.useState)({data:[],isFetching:!0,sucess:!1}),h=Object(c.a)(b,2),E=h[0],g=h[1],j=Object(a.useState)(),O=Object(c.a)(j,2),k=O[0],w=O[1];Object(a.useEffect)((function(){w(function(e,t,n){return t.length>0?t.reduce((function(t,a,r){return s(0===r?e:t,a,n)}),[]):i(e,n)}(E.data.results,u.filters,v))}),[v,u]);var C={initialData:E,starWarsAPI:function(){fetch("https://swapi.co/api/planets/").then((function(e){return e.json()})).then((function(e){return g({data:e,isFetching:!1,sucess:!0})})).catch((function(e){return alert(e)}))},nameFilter:v,setNameFilter:p,valuesFilter:u,setValuesFilter:m,filteredData:k};return r.a.createElement(o.Provider,{value:C},t)};n(10);var f=function(){var e=Object(a.useContext)(o).setNameFilter;return r.a.createElement("div",null,r.a.createElement("input",{type:"text",onChange:function(t){return e(t.target.value)},placeholder:"Nome","data-testid":"nameInput"}))},d=n(4),v=["","population","orbital_period","diameter","rotation_period","surface_water"];function p(e){return function(e){if(e.length>0){var t=e.map((function(e){return e.column}));return v.filter((function(e){return!t.includes(e)}))}return v}(e).map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))}function b(e){return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"column"},r.a.createElement("select",{onChange:function(t){return e.setColumn(t.target.value)},"data-testid":"column",id:"column"},p(e.filters))),r.a.createElement("select",{onChange:function(t){return e.setComparison(t.target.value)},"data-testid":"comparison",id:"comparison"},r.a.createElement("option",{value:"bigger than"},"bigger than"),r.a.createElement("option",{value:"less than"},"less than"),r.a.createElement("option",{value:"equal to"},"equal to")),r.a.createElement("input",{value:e.value,onChange:function(t){return e.setValue(t.target.value)},"data-testid":"comparisonValue",id:"comparisonValue",type:"number",placeholder:"Valor"}),r.a.createElement("button",{type:"button",onClick:function(){return function(e){var t=e.column,n=e.comparison,a=e.value,r=e.filters,l=e.setValue,u=e.setColumn,c=e.setValuesFilter,o={column:t,comparison:n,value:a},i=[].concat(Object(d.a)(r),[{column:t,comparison:n,value:a}]);return""===t||""===n||""===a?null:(l(""),u(""),c({numericValues:o,filters:i}))}(e)}},"Adicionar filtro"))}var h=function(){var e=Object(a.useState)(""),t=Object(c.a)(e,2),n=t[0],l=t[1],u=Object(a.useState)("bigger than"),i=Object(c.a)(u,2),s=i[0],m=i[1],f=Object(a.useState)(""),d=Object(c.a)(f,2),v=d[0],p=d[1],h=Object(a.useContext)(o),E=h.setValuesFilter,g=h.valuesFilter.filters,j={column:n,setColumn:l,comparison:s,setComparison:m,value:v,setValue:p,setValuesFilter:E,filters:g};return 5===g.length?"All filters are being used":r.a.createElement("div",null,"Choose the column to filter:",r.a.createElement("div",null,b(j)))};n(11);function E(e){if(e.length>0){var t=function(e){return Object.entries(e[0]).map((function(e){return e[0]})).filter((function(e){return"residents"!==e}))}(e);return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e){return r.a.createElement("th",{"data-testid":"tableTH",key:"".concat(e,"1")},e)})))),r.a.createElement("tbody",null,function(e,t){return e.map((function(e){return r.a.createElement("tr",{key:e.diameter},t.map((function(t){return r.a.createElement("td",{"data-testid":"tableTD",key:t},e[t])})))}))}(e,t)))}return r.a.createElement("p",null,"Planet not found")}var g=function(){var e=Object(a.useContext)(o),t=e.initialData,n=e.filteredData,l=e.starWarsAPI;return Object(a.useEffect)((function(){l()}),[]),t.isFetching?r.a.createElement("p",null,"LOADING..."):E(n||t.data.results)};var j=function(){var e=Object(a.useContext)(o),t=e.valuesFilter.filters,n=e.setValuesFilter;return r.a.createElement("div",null,r.a.createElement("p",null,"Filters active:"),r.a.createElement("div",null,t.length>0?t.map((function(e){return r.a.createElement("div",{key:e.column},r.a.createElement("p",null,"".concat(e.column," ").concat(e.comparison," ").concat(e.value)),r.a.createElement("button",{type:"button",onClick:function(){return function(e){var a=t.filter((function(t){return t.column!==e}));return n({filters:a})}(e.column)}},"X"))})):"No filter"))};var O=function(){return r.a.createElement("div",null,r.a.createElement(j,null),r.a.createElement(h,null),r.a.createElement(f,null),r.a.createElement(g,null))};n(12),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(m,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[5,1,2]]]);
//# sourceMappingURL=main.5c0d2437.chunk.js.map